<link rel="stylesheet" href="https://instructure-uploads-eu.s3.eu-west-1.amazonaws.com/account_167640000000000001/attachments/852203/mobile.min.css"><div id="kl_custom_css">&nbsp;</div>
<div id="kl_wrapper_3" class="kl_flat_sections kl_wrapper mps-page-content">
<div id="kl_banner" class="kl_border_radius_20 mps-banner-div">
<h2 class="mps-banner-h2">M5 â€“ L3: Establishing a Trigger</h2>
</div>
<div id="kl_banner_image"><img id="62515" class="kl_border_radius_20" src="https://nulondon.instructure.com/courses/2778/files/802194/download?verifier=ZObkZbVZgDFz47mh6nmsNoFa1G3gw05QSHE3V9Bi" alt="SQL-Introducing-Advanced-Features.jpg" data-api-returntype="File" data-api-endpoint="https://nulondon.instructure.com/api/v1/courses/2778/files/802194"></div>
<div id="kl_custom_block_0" class="" style="background-color: #ffffff; color: #000000; padding-top: 20px; padding-right: 0px; padding-left: 0px;">
<p class="kl_module_progress_icons" style="background-color: #3c5b72; color: #ffffff; border-color: #ffffff;">Icon Progress Bar/Navigation (built in browser, hidden in app)</p>
</div>
<h3 class="kl_border_radius_50 mps-page-title">
<i class="fas fa-info" style="background-color: #3c5b72; color: #ffffff;" aria-hidden="true"> </i>Establishing a Trigger</h3>
<p>A trigger can be set up to define an action that the database must undertake should an event occur which can <em>compromise</em> data within a table, some tables or the entire database.</p>
<p>&nbsp;</p>
<p>A trigger can also be used to enforce some referential integrity constraints, to enforce complex constraints, or to audit changes to the data.</p>
<p>&nbsp;</p>
<p>Triggers are said to be based on the <em>Event-Condition-Action</em> (<strong>ECA</strong>) model:</p>
<div id="kl_custom_block_1" class="kl_panels_wrapper kl_panels_accordion" style="border-width: 1px; border-style: none; margin-right: 30px; margin-left: 30px; background-color: #ffffff; color: #000000;">
<h3 id="kl_panel_0" class="kl_border_radius_20 kl_panel_heading kl_panel_0" style="background-color: #e3dfda; color: #000000; border-width: 0px;">Event</h3>
<div id="kl_panel_0_content" class="kl_border_radius_20 kl_solid_border kl_panel_content kl_panel_0" style="border-style: solid; border-width: 0px; background-color: #f5eede; color: #000000; padding-left: 15px;">
<ul>
<li>The event(s) can involve the following SQL commands applied to records within a table or tables or views: <strong>INSERT</strong>, <strong>UPDATE</strong> or <strong>DELETE</strong>.</li>
<li>The event(s) can involve the following SQL commands applied to any object within a schema such as tables, sequences and indexes: <strong>CREATE</strong>, <strong>ALTER</strong> or <strong>DROP</strong>.</li>
<li>The event(s) can also include the startup and shutdown of a database, or when specific users log on and log off the database.</li>
<li>The event(s) can also include any error messages that are generated.</li>
</ul>
</div>
<h3 id="kl_panel_1" class="kl_border_radius_20 kl_panel_heading kl_panel_1" style="background-color: #e3dfda; color: #000000; border-width: 0px;">Condition</h3>
<div id="kl_panel_1_content" class="kl_border_radius_20 kl_solid_border kl_panel_content kl_panel_1" style="border-style: solid; border-width: 0px; background-color: #f5eede; color: #000000; padding-left: 15px;">
<ul>
<li>This determines whether the action should be executed or ignored.</li>
<li>The condition is an optional parameter, and so does not need to be specified.
<ul>
<li>If the condition is specified, the action will only be executed if the condition happens to be TRUE.</li>
</ul>
</li>
</ul>
</div>
<h3 id="kl_panel_2" class="kl_border_radius_20 kl_panel_heading kl_panel_2" style="background-color: #e3dfda; color: #000000; border-width: 0px;">Action</h3>
<div id="kl_panel_2_content" class="kl_border_radius_20 kl_solid_border kl_panel_content kl_panel_2" style="border-style: solid; border-width: 0px; background-color: #f5eede; color: #000000; padding-left: 15px;">
<p>This contains the SQL statements and code to be executed when a triggering statement is issued and the trigger condition (if used) evaluates to TRUE.<strong>&nbsp;</strong></p>
</div>
</div>
<p>The trigger can be directed when to take effect in relation to the event: <strong>BEFORE</strong>, <strong>AFTER</strong> or <strong>INSTEAD OF</strong>. The latter can be useful for modifying views that cannot be altered using the normal SQL <em>data manipulation language</em> (DML) statements. In this instance, the trigger gets <em>fired </em>in place of executing the original SQL statement.&nbsp;</p>
<p>&nbsp;</p>
<p>Two types of triggers that take place are:</p>
<div id="kl_custom_block_1" class="kl_panels_wrapper kl_panels_accordion" style="border-width: 1px; border-style: none; margin-right: 30px; margin-left: 30px; background-color: #ffffff; color: #000000;">
<h3 id="kl_panel_3" class="kl_border_radius_20 kl_panel_heading kl_panel_3" style="background-color: #e3dfda; color: #000000; border-width: 0px;">Row-Level Triggers</h3>
<div id="kl_panel_3_content" class="kl_border_radius_20 kl_solid_border kl_panel_content kl_panel_3" style="border-style: solid; border-width: 0px; background-color: #f5eede; color: #000000; padding-left: 15px;">
<ul>
<li>These occur for <strong><em>each row</em></strong> of the table.
<ul>
<li>The SQL keywords used are: <strong>FOR EACH ROW</strong>.</li>
</ul>
</li>
</ul>
</div>
<h3 id="kl_panel_4" class="kl_border_radius_20 kl_panel_heading kl_panel_4" style="background-color: #e3dfda; color: #000000; border-width: 0px;">Statement-Level Triggers</h3>
<div id="kl_panel_4_content" class="kl_border_radius_20 kl_solid_border kl_panel_content kl_panel_4" style="border-style: solid; border-width: 0px; background-color: #f5eede; color: #000000; padding-left: 15px;">
<ul>
<li>These occur only <strong><em>once</em></strong> for <strong><em>each statement</em></strong> and can affect multiple rows in a table.</li>
<li>The SQL keywords used are: <strong>FOR EACH STATEMENT</strong>
</li>
</ul>
</div>
</div>
<p>Triggers can also activate themselves sequentially. This can occur should there be a situation where one trigger executes, and on completion of altering the database, a second and other triggers activate, which themselves cause more changes to the database, and possibly activate more triggers, therefore leading to a <em>cascade of triggers!</em></p>
</div><script src="https://instructure-uploads-eu.s3.eu-west-1.amazonaws.com/account_167640000000000001/attachments/849352/mobile.min.js"></script>